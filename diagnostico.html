<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn√≥stico - P√°ginas Amarillas</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #1a2332; margin-bottom: 30px; }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .test-item {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-left: 4px solid #10B981;
            border-radius: 4px;
        }
        .test-item.loading {
            border-left-color: #F4B942;
        }
        .test-item.error {
            border-left-color: #EF4444;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }
        .status.ok { background: #D1FAE5; color: #065F46; }
        .status.loading { background: #FEF3C7; color: #92400E; }
        .status.error { background: #FEE2E2; color: #991B1B; }
        code {
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Diagn√≥stico del Sitio - P√°ginas Amarillas MX</h1>
        
        <div class="test-section">
            <h2>1. Recursos CSS</h2>
            <div id="css-tests"></div>
        </div>

        <div class="test-section">
            <h2>2. Recursos JavaScript</h2>
            <div id="js-tests"></div>
        </div>

        <div class="test-section">
            <h2>3. Im√°genes Cr√≠ticas</h2>
            <div id="img-tests"></div>
        </div>

        <div class="test-section">
            <h2>4. P√°ginas Internas</h2>
            <div id="page-tests"></div>
        </div>

        <div class="test-section">
            <h2>5. Resumen</h2>
            <div id="summary"></div>
        </div>
    </div>

    <script>
        const resources = {
            css: ['/css/style.css', '/css/categoria.css', '/css/perfil.css'],
            js: ['/js/app.js', '/js/categoria.js', '/js/perfil.js'],
            images: [
                '/img/img-eventos/decoracion-luminosa-eventos.webp',
                '/img/img-eventos/iluminacion-festiva-eventos.webp',
                '/img/img-eventos/decoracion-fiesta-luces.webp'
            ],
            pages: [
                '/categoria/entretenimiento.html',
                '/categoria/seguridad-privada.html',
                '/index.html',
                '/categorias.html'
            ]
        };

        let results = { ok: 0, error: 0 };

        async function testResource(url, type) {
            try {
                const response = await fetch(url, { method: 'HEAD' });
                return response.ok;
            } catch (e) {
                return false;
            }
        }

        function addTestItem(container, url, status) {
            const div = document.createElement('div');
            div.className = `test-item ${status}`;
            
            const statusBadge = document.createElement('span');
            statusBadge.className = `status ${status}`;
            statusBadge.textContent = status === 'ok' ? '‚úì OK' : status === 'loading' ? '‚è≥ Cargando...' : '‚úó Error';
            
            const urlCode = document.createElement('code');
            urlCode.textContent = url;
            
            div.appendChild(statusBadge);
            div.appendChild(document.createTextNode(' '));
            div.appendChild(urlCode);
            
            container.appendChild(div);
            return div;
        }

        async function runTests() {
            // Test CSS
            const cssContainer = document.getElementById('css-tests');
            for (const url of resources.css) {
                const item = addTestItem(cssContainer, url, 'loading');
                const ok = await testResource(url);
                item.className = `test-item ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').className = `status ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').textContent = ok ? '‚úì OK' : '‚úó Error';
                results[ok ? 'ok' : 'error']++;
            }

            // Test JS
            const jsContainer = document.getElementById('js-tests');
            for (const url of resources.js) {
                const item = addTestItem(jsContainer, url, 'loading');
                const ok = await testResource(url);
                item.className = `test-item ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').className = `status ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').textContent = ok ? '‚úì OK' : '‚úó Error';
                results[ok ? 'ok' : 'error']++;
            }

            // Test Images
            const imgContainer = document.getElementById('img-tests');
            for (const url of resources.images) {
                const item = addTestItem(imgContainer, url, 'loading');
                const ok = await testResource(url);
                item.className = `test-item ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').className = `status ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').textContent = ok ? '‚úì OK' : '‚úó Error';
                results[ok ? 'ok' : 'error']++;
            }

            // Test Pages
            const pageContainer = document.getElementById('page-tests');
            for (const url of resources.pages) {
                const item = addTestItem(pageContainer, url, 'loading');
                const ok = await testResource(url);
                item.className = `test-item ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').className = `status ${ok ? 'ok' : 'error'}`;
                item.querySelector('.status').textContent = ok ? '‚úì OK' : '‚úó Error';
                results[ok ? 'ok' : 'error']++;
            }

            // Show summary
            const summary = document.getElementById('summary');
            const total = results.ok + results.error;
            summary.innerHTML = `
                <div style="font-size: 24px; font-weight: bold; margin: 20px 0;">
                    ${results.ok} / ${total} recursos funcionando correctamente
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div style="padding: 20px; background: #D1FAE5; border-radius: 8px;">
                        <div style="font-size: 32px; color: #065F46; font-weight: bold;">${results.ok}</div>
                        <div style="color: #065F46;">Recursos OK</div>
                    </div>
                    <div style="padding: 20px; background: #FEE2E2; border-radius: 8px;">
                        <div style="font-size: 32px; color: #991B1B; font-weight: bold;">${results.error}</div>
                        <div style="color: #991B1B;">Recursos con Error</div>
                    </div>
                </div>
            `;
        }

        runTests();
    </script>
</body>
</html>
